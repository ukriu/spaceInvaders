const grid=document.querySelector(".grid"),resultDisplay=document.querySelector(".results");let currentShooterIndex=202;const width=15,aliensRemoved=[];let invadersId,isGoingRight=!0,direction=1,results=0;for(let e=0;e<225;e++){let e=document.createElement("div"),n=document.createElement("div");n.classList.add("view"),e.appendChild(n),grid.appendChild(e)}const squares=Array.from(document.querySelectorAll(".grid > div")),alienInvaders=[0,1,2,3,4,5,6,7,8,9,15,16,17,18,19,20,21,22,23,24,30,31,32,33,34,35,36,37,38,39];function draw(){for(let e=0;e<alienInvaders.length;e++)aliensRemoved.includes(e)||squares[alienInvaders[e]].classList.add("invader")}function remove(){for(let e=0;e<alienInvaders.length;e++)squares[alienInvaders[e]].classList.remove("invader")}function moveShooter(e){switch(squares[currentShooterIndex].classList.remove("shooter"),e.key){case"ArrowLeft":case"a":currentShooterIndex%15!=0&&(currentShooterIndex-=1);break;case"ArrowRight":case"d":currentShooterIndex%15<14&&(currentShooterIndex+=1)}squares[currentShooterIndex].classList.add("shooter")}function moveInvaders(){const e=alienInvaders[0]%15==0,n=alienInvaders[alienInvaders.length-1]%15==14;if(remove(),n&&isGoingRight){for(let e=0;e<alienInvaders.length;e++)alienInvaders[e]+=16;direction=-1,isGoingRight=!1}if(e&&!isGoingRight){for(let e=0;e<alienInvaders.length;e++)alienInvaders[e]+=14;direction=1,isGoingRight=!0}for(let e=0;e<alienInvaders.length;e++)alienInvaders[e]+=direction;draw(),squares[currentShooterIndex].classList.contains("invader")&&(resultDisplay.innerHTML=`${results}<br>YOU LOSE`,clearInterval(invadersId),lockInputs()),aliensRemoved.length===alienInvaders.length&&(resultDisplay.innerHTML=`${results}<br>YOU WIN`,clearInterval(invadersId),lockInputs())}function shoot(e){let n,t=currentShooterIndex;"ArrowUp"!==e.key&&"w"!==e.key&&" "!==e.key||(n=setInterval((()=>{if(squares[t].classList.remove("laser"),t-=15,t<0)clearInterval(n);else if(squares[t].classList.add("laser"),squares[t].classList.contains("invader")){squares[t].classList.remove("laser"),squares[t].classList.remove("invader"),squares[t].classList.add("boom"),setTimeout((()=>squares[t].classList.remove("boom")),300),clearInterval(n);const e=alienInvaders.indexOf(t);aliensRemoved.push(e),results++,resultDisplay.innerHTML=results}}),100))}function lockInputs(){document.removeEventListener("keydown",handleKeydown),document.getElementById("left").removeEventListener("click",handleLeftButton),document.getElementById("right").removeEventListener("click",handleRightButton),document.getElementById("up").removeEventListener("click",handleUpButton)}function handleKeydown(e){moveShooter(e),shoot(e)}function handleLeftButton(){moveShooter({key:"ArrowLeft"})}function handleRightButton(){moveShooter({key:"ArrowRight"})}function handleUpButton(){shoot({key:"ArrowUp"})}draw(),squares[currentShooterIndex].classList.add("shooter"),document.addEventListener("keydown",handleKeydown),document.getElementById("left").addEventListener("click",handleLeftButton),document.getElementById("right").addEventListener("click",handleRightButton),document.getElementById("up").addEventListener("click",handleUpButton),invadersId=setInterval(moveInvaders,600),document.addEventListener("DOMContentLoaded",(()=>{!function(e){let n=document.createElement("style");n.textContent=`:root { ${Object.entries(e).map((([e,n])=>`${e}: ${n};`)).join(" ")} }`,document.head.appendChild(n)}(function(e){let n=new URLSearchParams(new URL(e).search),t={};return n.forEach(((e,n)=>{n&&e&&(t[`--${n}-bg`]=e)})),t}(window.location.href))}));